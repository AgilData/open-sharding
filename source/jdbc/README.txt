dbShards/Analyze

dbShards/Analyze is a set of utilities to perform shard-analysis on a relational database.

The components supported by the product are:

- JDBC AnalyzeDriver: A JDBC driver which creates a special log utilized by other dbShards/Analyze tools. 
- JDBC SQL Replay: A utility for replay of a log generated by the Analyze Driver.

There are 2 archive files shipped with the release:

- dbshards-analyze.tar: This archive contains all utilities, along with individual jar files required to run the utilities.

- dbshards-analyze-driver-with-dependencies: This archive contains only a single jar:

dbshards-analyze-driver-with-dependencies.jar

It also contains the example properties files required to run the AnalyzeDriver.

This '...-with-dependencies.jar' is provided for convenience so that the single jar can be added to the class path with running with the 
AnalyzeDriver. This is equivalent to deploying the following jars in the target application:

lib/cfcommons.jar
lib/dbsanalyzedriver.jar
lib/dbscommon.jar
lib/dbsmessaging.jar

To install the utilities, simply untar the appropriate archive, for example:

cd /opt/
tar xvf dbshards-analyze.tar

This installs the product in:

dbshards/analyze/

The following properties files must be installed and configured:

- /etc/dbshards-analyze.properties: This properties file can be placed in this explicit location, or
the DBS_ANALYZE_PROPS environment variable can be set with the path for the location:

export DBS_ANALYZE_PROPS=/opt/dbshards/analyze/conf


- log.properties: This file must be in the class path of the application when running the AnalyzeDriver.
For JDBC SQL Replay, it automatically configures the classpath so the default location of dbshards/analyze/conf works fine.
Alternatively, if the target application uses Log4J, and a log4j.xml file is found on the classpath, the 
log.properties file is not required. However, it is advisable to include the 
dbShards/Analyze component paths in the log4j.xml configuration to control the level of logging. 

- Vendor JDBC Driver Jar: The vendor specific JDBC driver jar must be on the classpath. For the AnalyzeDriver,
add the jar to the classpath of the target application. For JDBC SQL Replay, copy the vendor JDBC driver
jar to the dbshards/analyze/lib dir.

There are instructions for modifying these properties files in the files themselves.

To run the JDBC AnalyzeDriver, ensure that the appropriate jar files are on the class path of the application. Set
the JDBC connection parameters as follows:

Driver class name: com.dbshards.analyze.logging.AnalyzeDriver
JDBC URL: jdbc:dbShardsAnalyze:[delegate driver url]
User: [delegate user]
Password: [delegate password]

Example:
Driver class name: com.dbshards.analyze.logging.AnalyzeDriver
JDBC URL: jdbc:dbShardsAnalyze:jdbc:postgresql://myhost/mydatabase
User: myuser
Password: mypassword

To run JDBC SQL Replay utility, run:

dbshards/analyze/bin/sqlreplay-jdbc

If desired, this directory can be added to the PATH environment variable, or a symlink can be created in /usr/bin:

ln -s /opt/dbshards/analyze/bin/sqlreplay-jdbc /usr/bin/sqlreplay-jdbc

For questions, contact: suport@dbshards.com

Copyright (c) 2011 CodeFutures Corporation. All rights reserved.




